function scrollFromTop(){let fff=window.pageYOffset||document.documentElement.scrollTop;return fff}function positionAfterSend(heightblock){let heightpage=jQuery(window).height();let heightpopupblock=jQuery(heightblock).height();let scrollFT=scrollFromTop();let position=heightpage/2+heightpopupblock+scrollFT;return position}
function mfScrollStatic_Click(event){event.preventDefault();for(let field of event.data.fields){if(this[field]){document.getElementById(field).value=this[field].replace("_"," ");continue}if(this[field]!==undefined)document.getElementById(field).value=""}jQuery("html, body").animate({scrollTop:jQuery("#mfForm_"+event.data.id).offset().top-100},2E3);return false}
function mfOpenModal_Click(event){event.preventDefault();for(let field of event.data.fields){if(this[field]){document.getElementById(field).value=this[field].replace("_"," ");continue}if(this[field]!==undefined)document.getElementById(field).value=""}let id=event.data.id;let modal_id="mfForm_"+id;let heightpage=jQuery(window).height();let heightpopupblock=jQuery("#"+modal_id).height();jQuery("#mfOverlay_"+id).fadeIn(400,function(){let scrollFT=0;let positiOnScroll=0;if(heightpopupblock+50>=heightpage){scrollFT=
scrollFromTop();positiOnScroll=50}else{scrollFT=0;positiOnScroll=heightpage/2-heightpopupblock/2+scrollFT}let modal=jQuery("#"+modal_id);modal.css("display","block").animate({opacity:1,top:positiOnScroll,opacity:1,visibility:"visible"},400,()=>{let overlay=jQuery(this).next(".mfOverlay");jQuery(this).css("padding",0).css("padding-right",0)}).css("opacity",1).css("top","200")});return false}
function mfCloseModal_Click(event){event.preventDefault();let id=event.data.id;let param=this;jQuery("#mfOverlay_"+id).fadeOut();jQuery("#mfForm_"+id).animate({top:"-50%"},400).animate({opacity:0},400,function(){}).delay(400).modal("hide")}var runingCloseModalForm=false;
function mfClickCloseModal(){if(runingCloseModalForm)return;runingCloseModalForm=true;jQuery(function(){jQuery(".mfOverlay, .mfClose").click(function(close){close.preventDefault();let id=jQuery(this).attr("data-id");let modal="#mfForm_"+id;let overley="#mfOverlay_"+id;console.log(overley,"HaHa");jQuery(modal).animate({top:0},200);jQuery(modal).animate({opacity:0},300,function(){jQuery(this).css("display","none");jQuery(overley).fadeOut(400)})})})}
function hideBlockFormAfterSend(id,modal,overley,status,response){jQuery(".mfStatusDone.id"+id).html(response);let heightpage=jQuery(window).height();let heightpopupblock=jQuery(".mfStatusDone.id"+id).height();let scrollFT=scrollFromTop();let positiOnScroll=heightpage/2-heightpopupblock/2;jQuery("#mfForm_"+id).animate({top:positiOnScroll},400,function(){jQuery(".mfStatusForm.id"+id).fadeOut();setTimeout(function(){jQuery("#mfForm_"+id).animate({top:-positiOnScroll},400,function(){jQuery(this).fadeOut();
jQuery("#mfOverlay_"+id).fadeOut()})},1E4)})}
function hideAndClearFormAfterSend(id,modal,overley,status,response){jQuery(".mfStatusDone.id"+id).html(response);let heightpage=jQuery(window).height();let heightpopupblock=jQuery(".mfStatusDone.id"+id).height();let scrollFT=scrollFromTop();let positiOnScroll=heightpage/2-heightpopupblock/2+scrollFT;jQuery("#mfForm_"+id).animate({top:positiOnScroll},400,function(){setTimeout(function(){jQuery("#mfForm_"+id).animate({top:-positiOnScroll},400,function(){jQuery(this).fadeOut();jQuery("#mfOverlay_"+
id).fadeOut("",function(){jQuery(".mfStatusDone.id"+id).fadeOut();jQuery(".mfStatusForm.id"+id).fadeIn();jQuery(".mfStatusForm.id"+id).get(0).reset();jQuery("#mfForm_"+id+" input[id^=submit]").button("ready")})})},1E4)})}function hideBlockStaticFormAfterSend(id,block,status,response){jQuery(".mfStatusDone.id"+id).html(response);jQuery(".mfStatusForm.id"+id).fadeOut(400,function(){jQuery(".mfStatusDone.id"+id).fadeIn(400)})}
function hideAndClearStaticFormAfterSend(id,block,status,response,textbutton){jQuery(".mfStatusDone.id"+id).html(response);jQuery(".mfStatusForm.id"+id).fadeOut(400,function(){jQuery(".mfStatusDone.id"+id).fadeIn(400,function(){setTimeout(function(){jQuery(".mfStatusDone.id"+id).fadeOut(400,function(){jQuery(".mfStatusForm.id"+id).fadeIn(400,function(){jQuery(".mfStatusForm.id"+id)[0].reset();jQuery("#mfForm_"+id+" input[id^=submit]").button("ready")})})},8E3)})})}
function mfAjaxDoneSuccess(data,status){this.deb&&console.log("Send Success! data:",[data]);this.deb&&console.log("Send Success! status:",status);let func_custom=window["funcAfter"+this.id];if(func_custom&&typeof func_custom==="function")func_custom.apply(this);let posAfterSend=positionAfterSend("#mfForm_"+this.id);let params=this;if(this.type==="popup")jQuery("#mfForm_"+this.id).animate({top:-posAfterSend},400,function(){jQuery(".mfStatusForm.id"+params.id+",.modal-footer.id"+params.id+", .mfBeforeText.id"+
params.id).fadeOut("500",function(){jQuery(".mfStatusDone.id"+params.id).fadeIn("500");if(params.clearaftersend)hideAndClearFormAfterSend(params.id,"#mfForm_"+params.id,"#mfOverlay_"+params.id,".mfStatusDone.id"+params.id,data);else hideBlockFormAfterSend(params.id,"#mfForm_"+params.id,"#mfOverlay_"+params.id,".mfStatusDone.id"+params.id,data)})});if(this.type==="static")jQuery(".mfStatusForm.id"+params.id+",.static-footer.id"+params.id+", .mfBeforeText.id"+params.id).fadeOut("500",function(){jQuery(".mfStatusDone.id"+
params.id).fadeIn("500");if(params.clearaftersend)hideAndClearStaticFormAfterSend(params.id,"#mfForm_"+params.id,".mfStatusDone.id"+params.id,data,jQuery("input#submit"+params.id).attr("value"));else hideBlockStaticFormAfterSend(params.id,"#mfForm_"+params.id,".mfStatusDone.id"+params.id,data);mfScrollStatic_Click.call(params,{data:params,first:true,preventDefault:function(){params.deb&&console.log("\ud83c\udfc6 mfScrollStatic_Click ","#mfForm_form_"+params.id,params);return true}})})}
function mfButtonSubmit_Click(e){e.data.deb&&console.log("--------- --------- Click Send ---------");let params=e.data;if(e.first)e.preventDefault();let func_custom=window["funcBefore"+params.id];if(func_custom&&typeof func_custom==="function")func_custom.apply(params);console.log("\ud83c\udfc6 mfButtonSubmit_Click ","#mfForm_form_"+e.data.id,e.data,jQuery("#mfForm_form_"+params.id));jQuery("#mfForm_form_"+params.id).validate({debug:false,invalidHandler:function(event,validator){console.log("\ud83d\udc4e --------- --------- Validate Faile ---------",
validator)},submitHandler:function(form){e.data.deb&&console.log("--------- --------- ---------");e.data.deb&&console.log("(I)  :-)  - submitHandlerValidate!!!!!->  ()  Captcha:",params.captcha?"Yes\ud83c\udf1f":"No\ud83d\udeab",params.captcha,params);e.preventDefault();if(params.captcha=="recaptcha"&&params.grecaptcha!==false){let rdy=this;params.response=grecaptcha.getResponse(params.WidgetId);if(params.response){console.log("(II) Execute() -submitHandler-CallBack!!!!!-> Token"," This:",this," Module:",
params);submitHandler.call(params,form);if(params.xCallback&&params.xCallback.trim())try{let callback=params.xCallback.trim();eval(callback+"()")}catch(e){}}return false}if(params.captcha=="recaptcha_invisible"&&params.grecaptcha!==false){let rdy=this;grecaptcha.execute(params.grecaptcha).then(function(token){params.token=token;console.log("(II) Execute() -submitHandler-CallBack!!!!!-> Token",token," This:",this," Module:",params);return;submitHandler.call(params,form)});return}else if(params.captcha==
"recaptcha_invisible"&&params.grecaptcha===false){e.data.deb&&console.log("(II) Valid() -submitHandler-CallBack!!!!!-> "," This:",this," Module:",params);return}else if(!params.captcha||params.grecaptcha===false){e.data.deb&&console.log("(II) Valid() -submitHandler-CallBack!!!!!-> "," This:",this," Module:",params);submitHandler.call(params,form);return}else e.data.deb&&console.log("\ud83d\udc4e Captcha NULL !!!    <--------- captcha:",params.captcha,"  grecaptcha:",params.grecaptcha)}})}
function submitHandler(form){this.deb&&console.log("(III)  submitHandler() -Execute-CallBack!!!!!-> ",this);jQuery("#submit_"+this.id).button("sending").css("text-transform","none").css("transform","none").addClass("active");let itemid=0;for(let clss of document.body.classList)if(clss.toString().substr(0,7)==="itemid-")itemid=clss.toString().substr(7);var data=new FormData(form);data.append("option","com_ajax");data.append("module","multi_form");data.append("format","raw");data.append("id",this.id);
data.append("page",document.location.href);data.append("title",document.title);data.append("Itemid",itemid);if(this.token)data.set("gToken",this.token);if(this.response)data.set("gToken",this.response);if(this.sitekey!==undefined)data.append("sitekey",this.sitekey);if(this.grecaptcha!==undefined)data.append("grecaptcha",this.grecaptcha);if(this.response)data.append("g-recaptcha-response",this.response);this.deb&&console.log("--------- --------- ---------");for(let field of this.fields)if(field.substring(0,
4)==="file")for(let file of document.getElementById(field).files)data.append(field,file);else;let vals=data.values();let etrs=data.entries();console.log("data:",vals," etrs:",etrs);let url=window.location.origin+"/index.php";url=document.baseURI+"index.php";this.deb&&console.log("Url Submit:",url);this.deb&&console.log("Ajax request ModuleID:",this.id," ",data);this.deb&&console.log(data);jQuery.ajax({type:"POST",url:url,dataType:"html",data:data,context:this,cache:false,contentType:false,processData:false}).done(mfAjaxDoneSuccess).fail(mfAjaxFailForm)}
function mfAjaxDoneForm(data,status){let params=this;if(this.type==="popup"){jQuery("body").append(jQuery(data));jQuery("#mfClose_"+this.id).click(this,mfCloseModal_Click);jQuery("#mfOverlay_"+this.id).click(this,mfCloseModal_Click);jQuery(".modal-backdrop.show").click(function(){jQuery(".mfOverlay").fadeOut();jQuery("dialog.mfForm_modal").animate({top:"-50%"},400).fadeOut().modal("hide");jQuery(this).hide()});if(this.buttons.length>0)for(let btn of this.buttons)jQuery(btn).click(this,mfOpenModal_Click);
let mod={data:this,preventDefault:()=>{}};document.addEventListener("keydown",event=>{if(event.code==="Escape"){event.preventDefault();mfCloseModal_Click(mod)}})}else{jQuery("#mod_"+this.id).append(jQuery(data));if(this.buttons.length>0)for(let btn in this.buttons)jQuery(btn).click(this,mfScrollStatic_Click)}this.deb&&console.log("\ud83c\udfc6 ButtonSubmit.Click(f()) id:"+this.id+" Tag:"+this.tag+" Type:"+this.type+" - Load form Success! - Done! status:",status," ",this);mfButtonSubmit_Click.call(this,
{data:this,first:true,preventDefault:function(){this.deb&&console.log("\ud83c\udfc6 mfButtonSubmit_Click ","#mfForm_form_"+this.id,this);return true}});jQuery("input#submit_"+this.id).each(function(i,el){}).click(this,mfButtonSubmit_Click);this.deb&&console.log("\ud83c\udfc6 Module id:"+this.id+" Tag:"+this.tag+" Type:"+this.type+" - Load form Success! - Done! status:",status)}
function mfAjaxFailForm(jqXHR,status,errorThrown){console.log(jqXHR.responseText);this.deb&&console.log("\ud83d\udc4e Module id:"+this.id+" Tag:("+this.tag+"), Type:"+this.type+" - Load form Fail! - Disabled button! status:",status,"\n this:",this," jqXHR:",jqXHR,"\n errorThrown:",errorThrown);jQuery("#"+this.button).hide()}
function mfGetUrlHash(url){let is_mod=false;let id=0;let hash={};Object.assign(hash,jQuery.url("#",url));let str_hash=jQuery.url("hash",url)||"";let amp=str_hash.indexOf("&");amp<1&&(amp=undefined);id=str_hash.startsWith("mfForm_form_")?str_hash.substring(12,amp):id;id=str_hash.startsWith("mfForm_")?str_hash.substring(7,amp):id;id=str_hash.startsWith("mod_")?str_hash.substring(4,amp):id;id=str_hash.startsWith("mod")?str_hash.substring(3,amp):id;hash.id=id||false;hash.path=jQuery.url("path",url);hash.hostname=
jQuery.url("hostname",url);hash.query=jQuery.url("query",url);hash.url=jQuery.url("",url);return hash}function mfGetModuleById(id){return jQuery(".mfForm.id"+id).data()||false}
function mfGotoModule(module,hash){for(let field of module.fields)if(hash[field])document.getElementById(field).value=hash[field];if(module.type==="static")mfScrollStatic_Click.call(module,{data:module,first:true,preventDefault:function(){module.deb&&console.log("\ud83c\udfc6 mfScrollStatic_Click ","#mfForm_form_"+module.id,module);return true}});if(module.type==="popup")mfOpenModal_Click.call(module,{data:module,first:true,preventDefault:function(){module.deb&&console.log("\ud83c\udfc6 mfOpenModal_Click ",
"#mfForm_form_"+module.id,module);return true}})}function mfGetAllActions(){return jQuery("a:not(.mfGo)").filter(function(){let href=this.getAttribute("href");if(!href)return false;if(href.indexOf("#")===-1||href.length<4)return false;return true}).map(function(){let hash=mfGetUrlHash(this.getAttribute("href"));hash.control=this;return hash}).filter(function(){return this.id}).get()}
function mfGetAllModules(){let modules={};let mods=jQuery(".mfForm").map(function(){let data=jQuery(this).data();data.control=this;return data});for(let module of mods)if(module.type)modules[module.id]=module;return modules;return mods}
function mfAjaxCompleteAllForm(p1){let mods=Array.isArray(this)?this:[this];for(let module of mods)if(module.captcha){let captcha_type=module.captcha;Object.assign(module,jQuery("#dynamic_captcha_"+module.id).data());module.WidgetId=module.grecaptcha=false;let Captcha_Render=()=>{module.WidgetId=module.grecaptcha=grecaptcha.render("dynamic_captcha_"+module.id,{"callback":function(response){module.response=response;let form=document.getElementById("mfForm_form_"+module.id);console.log("(II) CallBack() !!!!!->",
"#dynamic_captcha_"+module.id,module.captcha,module," Form:",form);if(!response)return;if(module.captcha=="recaptcha"){mfButtonSubmit_Click.call(module,{data:module,first:true,preventDefault:function(){this.deb&&console.log("\ud83c\udfc6 mfButtonSubmit_Click ","#mfForm_form_"+this.id,this);return true}});return}else submitHandler.call(module,form);console.log("(IV)  Response-CallBack!!!!! --\x3e R:",response," M:",module);if(module.xCallback&&module.xCallback.trim())try{let callback=module.xCallback.trim();
eval(callback+"()")}catch(e){}},"expired-callback":function(response){if(module.xExpiredCallback&&module.xExpiredCallback.trim())try{let callback=module.xExpiredCallback.trim();eval(callback+"()")}catch(e){}console.log("(-II)  Delay-CallBack!!!!!--\x3eR:",response," M:",module,"this:",mods)},"error-callback":function(response){if(module.xErrorCallback&&module.xErrorCallback.trim())try{let callback=module.xErrorCallback.trim();eval(callback+"()")}catch(e){}console.log("(-II)  Error-CallBack!!!!!--\x3eR:",
response," M:",module,"this:",mods)}})};let timerId=0;timerId=setInterval(()=>{if(!grecaptcha)return;clearInterval(timerId);if(module.grecaptcha)return;Captcha_Render()},1E3)}else;console.log("jQuery.validator.messages",jQuery.validator.messages);let tinyeditor=()=>false;if(typeof tinymce==="object")tinyeditor=function(){tinymce.init({selector:".joomla-editor-tinymce",menubar:false,toolbar:"undo redo | formatselect | bold italic backcolor strikethrough | removeformat  pastetext | alignleft aligncenter alignright alignjustify   | bullist numlist table outdent indent ",
plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code   wordcount"]})};let userLang=navigator.language||navigator.userLanguage;let edit_path=Joomla.iframeButtonClick?"/media/vendor/tinymce/tinymce.min.js":document.location.origin+"/media/editors/tinymce/tinymce.min.js";let lang_path=Joomla.iframeButtonClick?"/media/vendor/tinymce/langs/"+userLang+".js":document.location.origin+"/media/editors/tinymce/langs/"+
userLang+".js";jQuery.getScript(edit_path).always(_=>jQuery.getScript(lang_path).always(tinyeditor));let hash=mfGetUrlHash();let module=hash.id?mfGetModuleById(hash.id):false;module&&mfGotoModule(module,hash);let actions=mfGetAllActions();let modules=mfGetAllModules();for(let action of actions){if(!(action.id in modules))continue;let module=modules[action.id];action.module=module;(action.url.startsWith("#")||(hash.hostname===action.hostname||action.hostname==="")&&(hash.path===action.path||["","/",
"index.php","/index.php"].includes(hash.path)&&["","/","index.php","/index.php"].includes(action.path))&&hash.query===action.query)&&(modules[action.id].type==="static"&&(jQuery(action.control).click(function(e){e.preventDefault();mfScrollStatic_Click.call(action,{data:modules[action.id],first:true,preventDefault:function(){return true}});return false})||true)||modules[action.id].type==="popup"&&(jQuery(action.control).click(function(e){e.preventDefault();mfOpenModal_Click.call(action,{data:modules[action.id],
first:true,preventDefault:function(){return true}});return false})||true))}console.log("\ud83c\udfc6\ud83c\udfc6\ud83c\udfc6\ud83c\udfc6\ud83c\udfc6\ud83c\udfc6\ud83c\udfc6\ud83c\udfc6 Module :",mods);jQuery(":input").inputmask()}
jQuery(function(){let mfButtons={};let itemid=0;for(let clss of document.body.classList)if(clss.toString().substr(0,7)==="itemid-")itemid=clss.toString().substr(7);jQuery.when(...jQuery(".mfForm").filter(function(i,form_mod){let params=jQuery(form_mod).data();if(!params.id)return false;params.button=jQuery(form_mod).get(0).id;params.tag=jQuery(form_mod).get(0).tagName;if(!(params.id in mfButtons))mfButtons[params.id]=[];if(["a","button","A","BUTTON"].includes(params.tag))if(mfButtons[params.id])mfButtons[params.id].push(form_mod);
if("mod_"+params.id!==params.button)return false;params.buttons=mfButtons[params.id];form_mod.params=params;return true}).sort((a,b)=>a.dataset.captcha.length-b.dataset.captcha.length).map(function(index,form_mod){let url=window.location.origin+"/index.php";url=document.baseURI+"index.php";let request={id:form_mod.params.id,format:"raw",module:"multi_form",option:"com_ajax",method:"getForm",Itemid:itemid};return jQuery.ajax({type:"POST",url:url,dataType:"html",data:request,context:form_mod.params}).done(mfAjaxDoneForm).fail(mfAjaxFailForm)})).done(mfAjaxCompleteAllForm)});